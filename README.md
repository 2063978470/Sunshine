Sunshine 项目概述
========

## 本项目处在 Alpha 开发阶段，还处于原始概念开发过程。
## 功能和界面会随时变动，不适合任何部署、测试、应用。


这会是一个全栈基于 Symfony 框架的 OA 系统。

### 技术栈

1. Symfony 3 基础框架 (目前是3.2.7)
2. 前端UI
    * AdminLTE 模板 (Bootstrap)
    * jQuery EasyUI
        * https://www.jeasyui.com/
        * 用EasyUI的组件作为对 AdminLTE 的补充
3. 三方 Bundle
  - gedmo/doctrine-extensions (目前使用其中的tree)
    https://github.com/Atlantic18/DoctrineExtensions
  - hautelook/alice-bundle (版本使用了 1.4，而不是 2.0 beta。用于填充初始和示例数据。)
    https://github.com/hautelook/AliceBundle/tree/1.x

### 源码目录结构

全部代码在 src 目录下，分为几个 Bundle:

1. OrganizationBundle 组织、公司、部门、用户等组织机构相关信息功能的包。
* 组织的概念类似企业集团，能以组织为最大单位划分功能区域，彻底阻隔资源的互相访问。
* 公司(Company)，这是组织一级下边的独立运营性质的公司实体。
* 部门以商业单元来区分(BusinessUnit)，它是一个树状的组织形式，可以系统、子系统、事业部、
  部门、子部门等概念。
* 用户(User)，这是整个OA系统的最小组织单位，也是最终的实际的用户实体。
* 岗位(Title)，这是用户的岗位、职务名称。
* 职务级别(ServiceGrade)，这是用户的职务级别，比如总裁、副总裁、总监、部门经理、主管、员工
* 工作组(WorkGroup)，将用户以分组形式构成工作组，以用于审批、开放特定权限等工作。
* 组织角色(OrganizationRole) 组织角色指定特定用户为某个组织的某些角色，如组织管理员、表单管理员、
  人力资源管理员、薪资专员

2. ApplicationFormBundle 申请表的格式导入、字段配置、流转流程制定等相关功能的包。
* 用户通过 microsoft office infopath (或 libreoffice，具体用哪个待定) 自行制表，并在表内填充 text 表单控件。
* 表单管理员在后台导入此文件，程序解析出表格样式和表单控件，通过界面由表单管理员逐一配置每个控件的字段类型，
  如日期配置为 datetime，数量配置为 int, 文本配置为 string 或 text 。
* 再由表单管理员创建表单流程，表单流程由节点、流转条件组成。表单将按照预期的设置进行流转，直到结束节点。
* 查询、统计。根据配置可对已有表单数据进行查询和统计。

3. UIBundle 用户界面相关的包。
* 本项目将使用 AdminLTE 模板作为 UI 库。
  https://github.com/almasaeed2010/AdminLTE

### 任务列表

- [ ] 组织管理。让管理员通过后台添加组织、维护组织信息。
- [ ] 公司管理。让管理员通过后台添加组织、维护公司信息。
- [ ] 商业单元管理。让管理员通过后台添加商业单元、维护相关信息。
- [ ] 岗位管理。让管理员通过后台添加维护岗位信息。
- [ ] 职务级别管理。让管理员通过后台添加维护职务级别信息。
- [ ] 用户管理。实现用户登录、密码重置。让管理员通过后台维护用户，实现用户添加、更新信息、停用。
     实现命令工具添加用户。
- [ ] 工作组管理。让管理员通过后台添加维护工作组信息。
- [ ] 组织角色。让管理员通过后台添加维护组织角色信息。

### 菜单明细

1. 组织架构管理
    * 组织管理
    * 单位管理
    * 部门管理
    * 岗位管理
    * 职务级别管理
    * 人员管理
    * 工作组管理
    * 单位角色设置
    * 工作范围控制
    * 单位标识配置
    
### UI说明

1. 组织创建、编辑界面
    * 左侧，单位基本信息：
        * 组织名称
        * 外文名称
        * 组织简称
    * 左侧, 系统管理信息
        * 管理员登录名(默认 admin1)
    * 右侧, 组织说明信息
        * 单位类型(下拉框选取)
        * 负责人(法人)
        * 地址(公司注册地址)
        * 邮编
        * 电话
        * 传真
        * 网站
        * 邮件地址
     * 右侧, 单位描述(text)
     
### 可能的坑

1. 一些翻译是不能修改的
    * 'sunshine.organization.form.org.type':'组织类型'  这个翻译会存储为 Options 的 name，
      会在一些选项里通过此翻译进行数据库查询，所以一旦初始化，不能修改此翻译。
2. 不能重复的地方
    * 部门名称。
        ** 同一公司不能有重复的部门名称，这将作为组织管理里对部门管理的强制要求，
           但不同公司间的部门名称可以重复。
        ** 切忌使用一下名称命名部门名称，否则会产生意外的问题: "部门", "name"
        ** 删除的部门名称并不是唯一性判断依据。也就是说，不是删除状态的部门名称是唯一的，
        而已删除部门之间，已删除和未删除部门之间可能会有重名的情况，所以恢复删除部门时需要加必要的后缀。
        比如 财务部-已删除-2017-6-21